# AWS S3 설정 가이드 🚀

Flask SNS 앱에 AWS S3 파일 업로드 기능을 추가하는 방법입니다.

## 📋 사전 준비사항

1. **AWS 계정** (무료 티어 사용 가능)
2. **신용카드** (무료 티어용, 요금 발생 안함)
3. **이메일 주소**

## 🚀 AWS S3 설정 단계

### 1단계: AWS 계정 생성

1. [AWS.com](https://aws.amazon.com) 접속
2. **"계정 생성"** 클릭
3. 계정 정보 입력:
   - **이메일 주소**
   - **비밀번호**
   - **AWS 계정 이름**
4. 연락처 정보 입력
5. 신용카드 정보 입력 (무료 티어용)
6. 휴대폰 인증 완료
7. **"계정 생성 완료"** 클릭

### 2단계: S3 버킷 생성

1. AWS 콘솔에서 **"S3"** 검색
2. **"버킷 만들기"** 클릭
3. 버킷 설정:
   - **버킷 이름**: `flask-sns-files-2024` (고유한 이름)
   - **AWS 리전**: `아시아 태평양 (서울) ap-northeast-2`
   - **퍼블릭 액세스 차단**: **모든 퍼블릭 액세스 차단 해제**
   - **버킷 소유권**: **ACL 활성화**
4. **"버킷 만들기"** 클릭

### 3단계: IAM 사용자 생성

1. AWS 콘솔에서 **"IAM"** 검색
2. **"사용자"** → **"사용자 생성"** 클릭
3. 사용자 설정:
   - **사용자 이름**: `flask-sns-s3-user`
   - **액세스 키**: **프로그래밍 방식 액세스** 선택
4. **"다음"** 클릭
5. 권한 설정:
   - **"기존 정책 직접 연결"** 선택
   - **"S3FullAccess"** 검색 후 선택
6. **"다음"** 클릭 → **"사용자 생성"** 클릭

### 4단계: 액세스 키 저장

생성된 사용자에서:
1. **"보안 자격 증명"** 탭 클릭
2. **"액세스 키 만들기"** 클릭
3. **"액세스 키 ID"**와 **"시크릿 액세스 키"** 복사하여 안전한 곳에 저장

## 🔧 Railway 환경변수 설정

Railway 프로젝트 대시보드에서 **"Variables"** 탭에서 설정:

```
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=ap-northeast-2
S3_BUCKET_NAME=flask-sns-files-2024
```

## 📁 S3 버킷 정책 설정

S3 버킷에서 **"권한"** 탭에서 버킷 정책 추가:

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "PublicReadGetObject",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::flask-sns-files-2024/*"
        }
    ]
}
```

## 🚀 배포 및 테스트

1. **GitHub에 코드 푸시**
2. **Railway에서 재배포**
3. **파일 업로드 테스트**

## 💰 비용 정보

### AWS S3 무료 티어 (12개월)
- **저장공간**: 5GB
- **요청**: 월 20,000 GET 요청, 2,000 PUT 요청
- **데이터 전송**: 15GB

### 일반 요금 (무료 티어 이후)
- **저장공간**: $0.023/GB/월
- **요청**: $0.0004/1,000 요청
- **데이터 전송**: $0.09/GB

## 🛡️ 보안 주의사항

1. **액세스 키 보안**: 절대 공개하지 마세요
2. **버킷 권한**: 필요한 최소 권한만 부여
3. **정기 모니터링**: AWS 비용 대시보드 확인

## 🐛 문제 해결

### 파일 업로드 실패
1. **액세스 키 확인**: 올바른 키인지 확인
2. **버킷 이름 확인**: 환경변수와 일치하는지 확인
3. **권한 확인**: S3FullAccess 권한이 있는지 확인

### 파일 접근 불가
1. **버킷 정책 확인**: 공개 읽기 권한 설정 확인
2. **파일 URL 확인**: 올바른 S3 URL인지 확인

## 📞 지원

문제가 있으면:
1. AWS S3 문서 참조
2. Railway 로그 확인
3. GitHub 이슈 생성

---

**설정 완료 후**: 파일 업로드 기능이 정상 작동합니다! 🎉
